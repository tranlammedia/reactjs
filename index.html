<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=m, initial-scale=1.0">
    <title>ReactJS</title>
    <style>
        pre { 
            background-color: rgb(32, 32, 32);
            color: #fff;
            width: 800px;
            padding-top: 12px;
            border-radius: 10px;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <h1>Reactjs rên F8</h1>
    <h2>createElement()</h2>
    <ul>
        <li>document.createElement() -> DOM Element</li>
        <pre>
        const h1Dom = document.createElement('h1');
        h1Dom.title = 'Hello';
        h1Dom.className = 'heading';
        h1Dom.innerText = 'Hello guys DOM'
        document.body.appendChild(h1Dom)
        </pre>
        <p>Vi du 2</p>
        <pre>
        const h1React = React.createElement('h1', {
            title: 'Hello',
            className: 'heading'
        }, 'Hello guys Reactjs')

        const ulDom = document.createElement('ul');
        const liDom1 = document.createElement('li');
        const liDom2 = document.createElement('li');
        
        liDom1.innerText = 'javascript'
        liDom2.innerText = 'Reactjs'

        ulDom.appendChild(liDom1)
        ulDom.appendChild(liDom2)

        document.body.appendChild(ulDom)
        </pre>
        <li>React.createElement() -> React Element</li>
        <p><b>
            React.createElement(type, props, children, children n...)
        </b></p>
        <pre>
        const h1React = React.createElement('h1', {
            title: 'Hello',
            className: 'heading'
        }, 'Hello guys Reactjs')
        </pre>
        <p>Vi du 2</p>
        <pre>
        const ulReact = React.createElement(
            'ul',
            null,
            React.createElement('li', null, 'javascript'),
            React.createElement('li', null, 'reactjs')
            )
        console.log(ulReact)
        </pre>
    </ul>
    <h2>ReactDOM</h2>
    <pre>
        const rootDOM = document.getElementById('root')
        ReactDOM.render(divReact, rootDOM)
    </pre>
    <h2>JSX va babel</h2>
    <h2>React.createElement: nhan string, function/class</h2>
        <h3>function</h3>
        <pre>
            function Header(){
                return (
                    &lt;li>heading&lt;/li>
                )
            }

            const app = (
                &lt;React.Fragment>
                &lt;Header>&lt;/Header>
                &lt;/React.Fragment>
            )

            ReactDOM.render(app, document.getElementById('root'))
        </pre>
        <h3> class
        </h3>
        <pre>
            class Content extends React.Component {
                render() {
                    return (
                        &lt;li>content&lt;/li>
                    )
                }
            }
        </pre>
    <h2>Tuân thủ quy tắc tên component</h2>
        <p>viết HOA chữ đầu</p>
        <pre>
            const type = 'Checkbox'
            const Component = Form[type]
        </pre>
        <p>Ví dụ</p>
        <pre>
            const Form = {
                Input() {
                    return (
                        &lt;input />
                    )
                },
                Checkbox() {
                    return (
                        &lt;input type="checkbox" />
                    )
                }
            }
    
            // App.js
            function App() {
                const type = 'Checkbox'
                const Component = Form[type]
                return (
                    &lt;React.Fragment>
                        &lt;Component />
                    &lt;/React.Fragment>
                )    
            }
        </pre>
        <p>Ví dụ 2</p>
        <pre>
            function Button({ title, href, onClick }) {
                let Component = 'button'
                const props = {}
    
                if (onClick) {
                    props.onClick = onClick
                }
    
                if (href) {
                    Component = 'a'
                    props.href = href
                }
                return (
                    &lt;Component {...props}>{title} &lt;/Component>
                )
            }
    
            // App.js
            function App() {
                return (
                    &lt;Button 
                        title="Click me"
                        href="https://fullstack.edu.vn/"
                        // onClick={() => console.log(Math.random())}
                    />
                )    
            }
        </pre>
        <p>Ví dụ 3 &&</p>
        <pre>
            function App() {
                let boolean =false
                return (
                    &lt;div>
                        {boolean && &lt;h2>Chao mung den F8&lt;/h2>}
                    &lt;/div>
                )    
            }
        </pre>
        <p>Ví dụ 4 OR ||</p>
        <pre>
            function App({ title }) {
                let boolean =false
                return (
                    &lt;div>
                        {&lt;h3>{title}&lt;/h3> || &lt;h2>Chao mung den F8&lt;/h2>}
                    &lt;/div>
                )    
            }
        </pre>
    <h2>props</h2>
        <h3>propName1="string literals"</h3>
        <h3>propName2={expression}</h3>
        <h3>props default to true</h3>
        <pre>
            &lt;Button 
                primary
                title='click me'
                href="https://fullstack.edu.vn/"
                onClick={() => console.log(Math.random())}
            />
            ---
            primary -> true
        </pre>
        <h3>spread/rest props</h3>
        <pre>
            function Input({label, ...inputProps}) { // spread lấy phần còn lại
                return (
                    &lt;div>
                        &lt;label>{label}&lt;/label>
                        &lt;input {...inputProps}>&lt;/input> // rest giải nén ra
                    &lt;/div>
                )
            }

            // App.js
            function App() {
                return (
                    &lt;React.Fragment>
                        &lt;Input 
                            label="Email"
                            type="checkbox"
                            onFocus={() => console.log(Math.random())}
                            placeholder="nhap email"
                        />
                    &lt;/React.Fragment>
                )
            }
        </pre>
        <h3>children props</h3>
        <p>&lt;Component>string literals&lt;/Component></p>
        <pre>
            function Button({ children }) {
                return (
                    &lt;button>{children}&lt;/button>
                )
            }
            // App.js
            function App() {
                return (
                    &lt;React.Fragment>
                        &lt;Button >Click me!&lt;/Button>
                    &lt;/React.Fragment>
                )
            }
        </pre>
        <p>&lt;Component>{expression}&lt;/Component></p>
        <pre>
            function App() {
                return (
                    &lt;React.Fragment>
                        &lt;Button >{false || 'click me'}&lt;/Button>
                    &lt;/React.Fragment>
                )
            }
        </pre>
        <h3>render props</h3>
        <p>Cách 1</p>
        <pre>
            function List({ data, children }) {
                console.log(children)
                return (
                    &lt;ul>
                        {data.map((i, index) => children(i, index))}
                        ---
                        {data.map((...props) => children(...props))}
                    &lt;/ul>
                )
            }
            // App.js
            function App() {
                const cars = ['BMW', 'Honda', 'Mazda']
                return (
                    &lt;div>
                        &lt;List data={cars}>
                            {(item, index) => &lt;li className='item' key={index}>{item}&lt;/li>}
                        &lt;/List>
                    &lt;/div>
                )
            }
        </pre>
        <p>Cách 2</p>
        <pre>
            function List({ data }) {
                return (
                    &lt;ul>
                        {data.map((item) => &lt;li className='item'>{item}&lt;/li>)}
                    &lt;/ul>
                )
            }
            // App.js
            function App() {
                const cars = ['BMW', 'Honda', 'Mazda']
                return (
                    &lt;div>
                        &lt;List data={cars} />
                    &lt;/div>
                )
            }
        </pre>
    <h2>NPM NPX YARN</h2>
        <h3>NPM</h3>
        <ul>
            <li>install project</li>
                <pre>
                    npm install react react-dom ->
                    npm install react react-dom --save -> dependencies
                    npm i react react-dom --save -> dependencies

                    npm install react react-dom --save-dev -> devDependencies
                    npm i react react-dom --save-dev -> devDependencies

                    npm uninstall react react-dom
                </pre>
            <li>install global: khi project không phụ thuộc vào thư viện</li>
                <pre>
                    npm i --global creact-react-app
                    npm i -g creact-react-app

                    npm uninstall -g creact-react-app
                </pre>
        </ul>
        <h3>NPX</h3>
        <p>Làm việc với thư viện có file .bin</p>
            <pre>
                npx create-react-app --help
            </pre>
        <h3>YARN va NPM</h3>
        <p>YARN do facebook xay dung nam 2016</p>
        <ul>Uu diem
            <li>YARN cai song song nhieu thu vien cung luc. NPM se cai lan luot tung thu vien</li>
            <li>YARN se luu tam thu vien da cai dat trong bo nho'. Khi su dung lan 2 lan 3 thu vien do, YARN se tim tren vung nho de cai vao truoc. Muc dich tang toc nhanh hon o nhung lan lam viec sau</li>
            Nhuoc diem
            <li>Dung tru luu tru cao hon</li>
        </ul>
    <h2>Hooks</h2>
    <p>hook là thuật ngữ bên reactjs để chỉ method giống như bên javascript</p>
    <p>- Chỉ dùng được trong function component</p>
    <ul>
        <li><h3>useState</h3></li>
            <p>Khi muốn dữ liệu thay đổi thì giao diện tự động cập nhật (render theo dữ liệu)</p>
            <h4>using</h4>
            <pre>
                import { useState } form 'react'

                function Component() {
                    const [state, setState] = useState(initState)

                    ...
                }
            </pre>
            <p>- initState: giá trị ban đầu sẽ đưa vào state</p>
            <p>- setState: là function, thay đổi giá trị ban đầu, và return giá trị mới vào state</p>
            <h4>Ví dụ</h4>
            <pre>
                function App() {

                    const [counter, setCounter] = useState(1)
                  
                    const handleCounter = () => {
                      setCounter(counter + 1)
                    }
                    return (
                      &lt;div className="App">
                        &lt;h1>{counter}&lt;/h1>
                        &lt;button onClick={handleCounter}>Increase&lt;/button>
                      &lt;/div>
                    );
                  }
            </pre>
            <p>Truyền callback vào setState</p>
            <pre>
                const handleCounter = () => {
                    setCounter((prevState) => prevState + 1)
                    setCounter((prevState) => prevState + 1)
                  }
            </pre>
            <p>Truyền callback vào initState</p>
            <pre>
                const orders = [100, 200, 300]

                const [counter, setCounter] = useState(() => {
                    const total = orders.reduce(function(total, value) {
                    return total + value
                    })
                    return total
                })
            </pre>
            <p>set giá trị mới cho state</p>
            <pre>
                const [info, setInfo] = useState({
                    name: 'Nguyen Van A',
                    age: 18,
                    address: 'Ha Noi, VN'
                  })
                  
                const handleUpdate = () => {
                    setInfo({
                      ...info,
                      bio: 'Yeu mau hong'
                    })
                  }
                
                  
                const handleUpdate = () => {
                    setInfo(info => {
                        //logic ...
                        return {
                        ...info,
                        bio: 'Yeu mau hong'
                        }
                    })
                }
            </pre>
            <p>Thêm ví dụ</p>
            <p><b>Random gift</b></p>
            <pre>
                const gifts = [
                    'CPU i9',
                    'RAM 32GB RGB',
                    'RGB Keyboard',
                    'Chúc may mắn lần sau',
                    'Chúc may mắn lần sau',
                    'Chúc may mắn lần sau',
                    'Chúc may mắn lần sau',
                    'Chúc may mắn lần sau'
                ]

                function App() {
                
                    const [gift, setGift] = useState()

                    function handleGift() {
                        const index = Math.floor(Math.random() * gifts.length)

                        setGift(gifts[index])
                    }

                    return (
                        &lt;div className="App">
                        &lt;h1>{gift || 'Chưa có phần thưởng'}&lt;/h1>
                        &lt;button onClick={handleGift}>Lấy thưởng&lt;/button>
                        &lt;/div>
                        );
                }
            </pre>
            <p><b>Two-way Binding (xử lý 2 chiều)</b></p>
            <pre>
                function App() {
                    const [name, setName] = useState('')
                  
                    return (
                      &lt;div className="App">
                        &lt;input 
                          onChange={e => setName(e.target.value)}
                        />
                        &lt;button onClick={() => setName('Lưu thay đổi')}>change&lt;/button>
                        &lt;p>{name}&lt;/p>
                      &lt;/div>
                  
                    );
                  }
            </pre>
            <pre>
                function App() {
                    const [name, setName] = useState('')
                    const [email, setEmail] = useState('')
                  
                    const handleSubmit = () => {
                      console.log({
                        name,
                        email
                      })
                    }
                  
                    return (
                      &lt;div className="App">
                        &lt;input 
                          value={name}
                          onChange={e => setName(e.target.value)}
                        />
                        &lt;input
                          value={email}
                          onChange={e => setEmail(e.target.value)}
                        />
                        &lt;button onClick={handleSubmit}>Register&lt;/button>
                        &lt;p>{name}, {email}&lt;/p>
                      &lt;/div>
                  
                    );
                  }
            </pre>
            <p>radio</p>
            <pre>
                const courses = [
                    {
                        id: 1,
                        name: 'HTML, CSS'
                    },
                    {
                        id: 2,
                        name: 'Javascript'
                    },
                    {
                        id: 3,
                        name: 'Reactjs'
                    }
                ]

                function App() {
                    const [checked, setChecked] = useState(1)
                    const handleChecked = () => console.log(checked)

                    return (
                        &lt;div>
                        {courses.map(course => (
                            &lt;div key={course.id}>
                            &lt;input 
                                type="radio"
                                onChange={() => setChecked(course.id)}
                                checked={checked === course.id}
                            />{course.name}
                            &lt;/div>
                        ))}
                        &lt;button onClick={handleChecked}>Submit&lt;/button>
                        &lt;/div>
                    );
                }
            </pre>
            <p>checkbox</p>
            <pre>
                function App() {
                    const [checked, setChecked] = useState([])
                    console.log(checked)
                    const handleCheck = (id) => {
                      setChecked(prev => {
                        const isChecked = checked.includes(id)
                        if (isChecked) {
                          // uncheck
                          return checked.filter(item => item !== id)
                        } else {
                          return [...prev, id]
                        }
                      })
                    }
                  
                    const handleSubmit = () => console.log(checked)
                  
                    return (
                      &lt;div>
                        {courses.map(course => (
                          &lt;div key={course.id}>
                            &lt;input 
                              type="checkbox"
                              checked={checked.includes(course.id)}
                              onChange={() => handleCheck(course.id)}
                            />{course.name}
                          &lt;/div>
                        ))}
                        &lt;button onClick={handleSubmit}>Submit&lt;/button>
                      &lt;/div>
                    );
                  }
            </pre>
            <p>Todolist</p>
            <pre>
                function App() {
                    const [job, setJob] = useState('')
                    const [jobs, setJobs] = useState(() => {
                      const storageJobs = JSON.parse(localStorage.getItem('jobs'))
                      return storageJobs ?? []
                    })
                    
                    // const handleJob = (job) => setJob(job)
                    const handleAdd = () => {
                      setJobs(prev => {
                        const newJobs = [...prev, job]
                        
                        const jsonJobs = JSON.stringify(newJobs)
                        localStorage.setItem('jobs', jsonJobs)
                  
                        return newJobs
                      })
                      setJob('')
                    }
                  
                    return (
                      &lt;div className='container'>
                        &lt;input 
                          placeholder='Nhập công việc'
                          value={job}
                          onChange={(e) => setJob(e.target.value)}
                        />
                        &lt;button onClick={handleAdd}>Add&lt;/button>
                        &lt;ul>
                          {jobs.map((job, index) => (
                            &lt;li key={index}>{job}&lt;/li>
                          ))}
                        &lt;/ul>
                      &lt;/div>
                    );
                  }
            </pre>
            <p>?? null/undefined lấy bên phải. || null, undefined, 0, [], false</p>
            <p>Mount va unmout</p>
            <pre>
                function App() {
                    
                    const [show, setShow] = useState(false)
                  
                    return (
                      &lt;div className='container'>
                        &lt;button onClick={() => setShow(!show)}>Toggle&lt;/button>
                        {show && &lt;Content />}
                      &lt;/div>
                    );
                  }
            </pre>
        <li><h3>useEffect</h3></li>
        <p>Kiến thức liên quan cần nắm để học useEffect</p>
        <p>+ Events: Add / remove event lítener</p>
        <p>+ Observer pattern: Subscribe / unsubscribe</p>
        <p>+ Closure</p>
        <p>+ Timers: setInterval, setTimeout, clearInterval, clearTimeout</p>
        <p>+ useState</p>
        <p>+ Mounted / unmounted</p>
        <p>+ ===</p>
        <p>+ Call API</p>
        <p><b>Dùng làm gì?</b></p>
        <p>Side effects: thuật ngữ dùng chung trong lập trình. Thay đổi nội dung bên cạnh hoạt động chính</p>
        <ol>
            <li>Update DOM</li>
            <p>- F8 blog title</p>
            <li>Call API</li>
            <li>Listen DOM events (Scroll, Resize)</li>
            <li>cleanup (Remove listener / Unsubscribe, Clear timer</li>
        </ol>
        <h4>Syntax using</h4>
        <pre>
            1. useEffect(callback)
            2. useEffect(callback, []) //array rỗng
            3. useEffect(callback, [dependencies])
            
        - Callback luôn được gọi sau khi component mounted
        </pre>
        <ol>
            <b><li>Update DOM</li></b>
            <pre>
                1. useEffect(callback)

            - Gọi callback mỗi khi component re-render
            - Gọi callback sau khi component thêm element vào DOM
            </pre>
            <pre>
                function Content() {
                    const [title, setTitle] = useState('')
                    useEffect(() => 
                        // console.log('mounted')
                        {document.title = title}
                    )
                    return (
                        &lt;div>
                            &lt;input 
                                value={title}
                                onChange={e => setTitle(e.target.value)}
                            />
                            {console.log('render')}
                        &lt;/div>
                    )
                }
            </pre>
            <b><li>Call API</li></b>
            <pre>
                2. useEffect(callback, []) //array rỗng
            
            - Chỉ gọi callback 1 lần sau khi component mounted. Nếu không có [], nó sẽ bị gọi callback API lặp lại vô hạn
            </pre>
            <pre>
                function Content() {
                    const [title, setTitle] = useState('')
                    const [posts, setPosts] = useState([])
                    useEffect(() => 
                        {fetch('https://jsonplaceholder.typicode.com/posts')
                            .then(res => res.json())
                            .then(posts => setPosts(posts))
                        }, []
                    )
                    useEffect(() => {document.title=title})
                    return (
                        &lt;div>
                            &lt;input 
                                value={title}
                                onChange={e => setTitle(e.target.value)}
                            />
                            {posts.map(post => {
                                return (
                                    &lt;li key={post.id}>{post.title}&lt;/li>
                                )
                            })}
                        &lt;/div>
                    )
                }
            </pre>
            <pre>
                3. useEffect(callback, [dependencies])
            
            - Gọi callback khi dependencies thay đổi
            </pre>
            <pre>
                function Content() {
                    const [title, setTitle] = useState('')
                    const [posts, setPosts] = useState([])
                    const [type, setType] = useState('posts')
                    console.log(type)
                
                    useEffect(() => 
                        {fetch(`https://jsonplaceholder.typicode.com/${type}`)
                            .then(res => res.json())
                            .then(posts => {
                                setPosts(posts)
                            })
                        }, [type]
                    )
                    useEffect(() => {document.title=title})
                    return (
                        &lt;div>
                            {tabs.map(tab => 
                                &lt;button 
                                key={tab}
                                style={ tab === type ? {
                                    color: '#fff',
                                    background: '#333'
                                } : {}}
                                onClick={() => setType(tab)}
                                >{tab}&lt;/button>)}
                            &lt;input 
                                value={title}
                                onChange={e => setTitle(e.target.value)}
                            />
                            {posts.map(post => {
                                return (
                                    &lt;li key={post.id}>{post.title || post.name}&lt;/li>
                                )
                            })}
                        &lt;/div>
                    )
                }
            </pre>
        </ol>

        <li><h3>useLayoutEffect</h3></li>
        <li><h3>useRef</h3></li>
        <li><h3>useCallback</h3></li>
        <li><h3>useMemo</h3></li>
        <li><h3>useReducer</h3></li>
        <li><h3>useContext</h3></li>
        <li><h3>useImperativeHandle</h3></li>
        <li><h3>useDebugValue</h3></li>
    </ul>
</body>
</html>